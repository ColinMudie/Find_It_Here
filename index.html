<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body>
    <button id="btn">
        Click me
    </button>

    <input type="text" id="userInput" placeholder="search anything">

    <script>

        // + $("#userInput").val() + "&begin_date=20120101&end_date=20121231&api-key=n8ZpZeGBjpYFymrs0Lcvt46sbEJDkNuY"


        $("#btn").on("click", () => {

            let userInput = $("#userInput").val();

            var queryURL = "https://netflix-unofficial.p.rapidapi.com/api/search";

            // ----------------------------------------Where to watch API--------------------------------------------------
            
            const settings = {
                "async": true,
                "crossDomain": true,
                "url": "https://watch-here.p.rapidapi.com/wheretowatch?title=" + userInput + "&mediaType=tv%20show",
                "method": "POST",
                "headers": {
                    "content-type": "application/json",
                    "x-rapidapi-key": "69d811a2bemsh7406c1b512a31f1p10322djsn64aee285beed",
                    "x-rapidapi-host": "watch-here.p.rapidapi.com"
                },
                "processData": false,
                "data": "{\n    \"mediaType\": \"tv show\",\n    \"title\": \""+ userInput +"\"\n}"
            };

            $.ajax(settings).done(function (response) {
                let parsedResponse = JSON.parse(response)
                console.log(typeof parsedResponse);
                // console.log(response)
                // console.log(typeof response)
                console.log(parsedResponse[0]);

            });

            // ----------------------------------------IMDB API --------------------------------------------------

            const settings2 = {
                "async": true,
                "crossDomain": true,
                "url": "https://movies-tvshows-data-imdb.p.rapidapi.com/?type=get-movies-by-title&title="+ userInput,
                "method": "GET",
                "headers": {
                    "x-rapidapi-key": "69d811a2bemsh7406c1b512a31f1p10322djsn64aee285beed",
                    "x-rapidapi-host": "movies-tvshows-data-imdb.p.rapidapi.com"
                }
            };

            $.ajax(settings2).done(function (response2) {
                console.log(response2);
            });

        })

    </script>


</body>

</html>
